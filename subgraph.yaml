specVersion: 1.0.0
indexerHints:
  prune: auto
schema:
  file: ./schema.graphql
dataSources:
  - kind: ethereum/contract
    name: CloneFactory
    network: flare
    source:
      abi: CloneFactory
      address: "0x67fe33484cAF1a8D716b84b779569f79881788Ae"
      startBlock: 34244043
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - VerifyFactory
        - Verify
      abis:
        - name: CloneFactory
          file: ./lib/rain.factory/out/CloneFactory.sol/CloneFactory.json
      eventHandlers:
        - event: NewClone(address,address,address)
          handler: handleNewClone
      file: ./src/cloneFactory.ts
templates:
  - kind: ethereum/contract
    name: CycloVaultTemplate
    network: flare
    source:
      abi: CycloVault
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Account
        - Token
        - TokenBalance
        - Transfer
      abis:
        - name: CycloVault
          file: ./lib/cyclo.sol/out/CycloVault.sol/CycloVault.json
      eventHandlers:
        - event: Transfer(indexed address,indexed address,uint256)
          handler: handleTransfer
      file: ./src/cys-flr.ts
  - kind: ethereum/contract
    name: CycloReceiptTemplate
    network: flare
    source:
      abi: CycloReceipt
    mapping:
      kind: ethereum/events
      apiVersion: 0.0.7
      language: wasm/assemblyscript
      entities:
        - Account
        - Token
        - TokenBalance
        - Transfer
      abis:
        - name: CycloReceipt
          file: ./lib/cyclo.sol/out/CycloReceipt.sol/CycloReceipt.json
      eventHandlers:
        - event: TransferSingle(indexed address,indexed address,indexed address,uint256,uint256)
          handler: handleReceiptTransferSingle
        - event: TransferBatch(indexed address,indexed address,indexed address,uint256[],uint256[])
          handler: handleReceiptTransferBatch
      file: ./src/receipt.ts